# 数字图像处理课程重点



## 一、名词概念

### 1.1 图像预处理

​		在图像分析中，对输入图像进行特征抽取、分割和匹配前所进行的处理。图像预处理的主要目的是消除图像中无关的信息，恢复有用的真实信息，增强有关信息的可检测性和最大限度地简化数据，从而改进特征抽取、图像分割、匹配和识别的可靠性。

​		**前处理和后处理**：前处理主要包括图像去噪、增强、平滑、锐化等工作；后处理是指图像分割、特征提取、边缘检测等类似的工作。

### 1.2 图像增强

​		主观增强图像中的有用信息，主观增强图像中感兴趣的某些特征，它可以是一个失真的过程，其目的是要改善图像的视觉效果，使其比原始图像更适合于特定应用。有目的地强调图像的整体或局部特性，将原来不清晰的图像变得清晰，或强调某些感兴趣的特征，扩大图像中不同物体特征之间的差别，抑制不感兴趣的特征，使之改善图像质量、丰富信息量，加强图像判读和识别效果，满足某些特殊分析的需要。如平滑滤波可模糊图像、降噪；锐化滤波可突出提取边缘强调细节；直方图均衡提高图像对比度等。频率域低通、高通滤波等同样的平滑、锐化图像等。

​		**空间域：**空间域图像增强是指增强构成图像的像素，是直接对这些像素操作的过程。主要方法有：灰度变换、直方图处理和空间滤波。

​		**频率域：**频率域图像增强是计算图像的傅里叶变换，将其转换到频率域进行处理，处理后再反变换回空间域。主要方法有：使图像平滑的低通滤波和锐化图像的高通滤波。

### 1.3 图像直方图

​		灰度级在某个区间内像素值的统计直方图，是一个离散函数，有统计、累加直方图等。由于其计算代价较小，且具有图像平移、旋转、缩放不变性等众多优点，广泛地应用于图像处理的各个领域，特别是灰度图像的阈值分割、基于颜色的图像检索以及图像分类。

​		灰度直方图：一个灰度级在范围[0，L-1]的数字图像的直方图是一个离散函数 h(rk)= nk，nk是图像中灰度级为rk的像素个数，rk 是第k个灰度级，k = 0，1，2，…，L-1，由于rk的增量是1，直方图可表示为：p(k)= nk即，图像中不同灰度级像素出现的次数。另一种表示方式归一化直方图是用像素的总数除以它的每一个值。

​		累计直方图：累计直方图代表图像组成成分在灰度级的累计概率分布情况，每一个概率值代表小于等于此灰度值的概率，P(rk)=n1+n2+n3+...Nk。每一个灰度级对应之前所有灰度级像素出现次数的累加。

### 1.4 图像复原

​		可以视作图像退化的逆过程，将图像退化的过程加以估计，建立退化的数学模型后，补偿退化过程造成的失真。客观恢复一些被某些因素（设备、环境、相对运动等）影响导致质量下降的图像，尽量恢复至其原始图像水平。整个过程可抽象为反退化和降噪，即通过先验知识确定退化、噪声模型，然后针对性进行降噪与反退化。若复原过程仅简化为对噪声的去除，则噪声为高斯、椒盐等到噪声（空间域）时可对应选择高斯、均值和中值等滤波器进行滤波降噪进行复原。若为周期噪声则可在频域进行滤波（频率域），如带通、带阻、陷波滤波等。

### 1.5 图像压缩

​		去除多余数据冗余，减少图像存储量或降低传输图像带宽的处理。这一过程实际上就是将二维像素阵列变换为一个在统计上无关联的数据集合。图像压缩也是指以较少的有损或无损地表示原来的像素矩阵的技术，也称图像编码。现在与图像有关的应用不断增多，而图像的数据量通常很大，对存储、处理和传输带来许多问题，因此需要进行图像压缩。

​		从哪几个方面压缩：①减少编码冗余 ②减少空间/时间（像素间）冗余 ③去除视觉上不重要的信息（心理视觉冗余）

​		压缩方法：图像压缩一般分为有损压缩和无损压缩两类。压缩方法有预测编码方法（空间域）（例如运动补偿）、变换编码方法（频率域）（例如离散余弦变换，小波变换），统计编码（例如哈夫曼编码）

### 1.6 图像滤波

​		在尽量保留图像细节特征的条件下对目标图像的噪声进行抑制，是图像预处理中不可缺少的操作，其处理效果的好坏将直接影响到后续图像处理和分析的有效性和可靠性。

方法举例：

- 中值滤波，基本原理是把数字图像中一点的值用该点的一个邻域中各点值的中值代替，从而消除孤立的噪声点，对单级或双极脉冲噪声非常有效。（去除椒盐噪声）。

- 均值滤波，基本原理是用邻域的均值代替原图像的各个像素值。在模糊了结果的同时减少了噪声，适用于处理随机噪声。（去除高斯噪声）。

- 高斯滤波，原理是用一个模板扫描图像中的每一个像素，用模板确定的领域内像素的加权平均值去替代模板中心像素点的值。能够很好的处理高斯噪声。

- 最大值和最小值滤波器，可以有效过滤椒盐噪声。

- 自适应滤波器，在滤波过程中，根据设定好的条件，动态的改变滤波器的窗口尺寸大小，判断当前像素是不是噪声。不但能够消除密度很大的椒盐噪声，还能更好的保护图像的细节。



## 二、简答

### 2.1 图像变换及举例

​		定义：为达到某种目的将原始图象变换映射到另一个空间上，使得图象的某些特征得以突出，以便于后面的处理和识别。也是为了用正交函数或正交矩阵表示图像而对原图像所作的二维线性可逆变换。一般称原始图像为空间域图像，称变换后的图像为转换域图像，转换域图像可反变换为空间域图像。图像处理中所用的变换都是酉变换，即变换核满足正交条件的变换。经过酉变换后的图像往往更有利于特征抽取、增强、压缩和图像编码。

​		**优点：**一般变换后的图象，1、能量集中-大部分能量都分布于低频谱段；2、去除了相关性；3、软硬件易实现，可并行加速；4、有相应快速算法。这对以后图象压缩、传输都十分有利。

​		**DCT变换：**（流程）DCT是先将整体图像分成N×N像素块，然后对N×N像素块逐一进行DCT变换。由于大多数图像的高频分量较小，相应于图像高频成分的系数经常为零，加上人眼对高频成分的失真不太敏感，所以可用更粗的量化，因此传送变换系数所用的数码率要大大小于传送图像像素所用的数码率。到达接收端后再通过反离散余弦变换回到样值，虽然会有一定的失真 ，但人眼是可以接受的。（特点）DCT计算复杂性适中，又具有可分离特性，还有快速算法，所以被广泛用于如JPEG、MPEG-1、MPEG-2及H.261等图象压缩算法中。

### 2.2 直方图均衡化的基本原理

​		目的是使图像的像素占有全部可能的灰度级且分布均匀，能够具有高对比度。直方图均衡化就是一种能仅靠输入图像直方图信息自动达到这种效果的变换函数。基本思想是对图像中像素个数多的灰度级进行展宽，而对图像中像素个数少的灰度进行压缩，从而扩展像元取值的动态范围，提高了对比度和灰度色调的变化，使图像更加清晰。

![直方图均衡化公式.png](https://github.com/EthanChen916/Digital-Image-Processing-Practice/blob/main/img/直方图均衡化公式.png)

### 2.3 梯度算子和拉普拉斯算子对比

​		梯度算子和拉普拉斯算子利用了微分的性质，都可用于图像的边缘检测，通常采用卷积模板实现。

**梯度算子**

​		梯度对应一阶导数，对于一个连续图像函数f(x，y)，它在点f(x，y)处的梯度是一个矢量。通过梯度最大、最小值点进行边缘判别提取，对应模板如：robert、sobel、prewitt算子，为各向异性算子，相对来说边缘提取较粗，对噪声不太敏感，其中sobel、prewitt算子应用较广，sobel算子对噪声抑制效果更好。梯度算子具有更多的应用。

**拉普拉斯算子**

​		二阶微分算子，各向同性，即原图旋转时边缘图对应旋转，通过二阶微分过零点来进行边缘判别提取。边缘提取相对更细致，往往边缘提取、锐化前可以先进行平滑滤波、降噪，以取得更好的边缘、锐化效果。

​		缺点：拉普拉斯算子对噪声具有敏感性；拉普拉斯算子的幅值产生双边缘；拉普拉斯算子不能检测边缘的方向；

​		优点：可以利用零交叉的性质进行边缘定位；可以确定一个像素是在边缘暗的一边还是亮的一边。

### 2.4 图像分割的基本原理

​		定义：是把图像分成若干个特定的、具有独特性质的区域并提出感兴趣目标的技术和过程。它是由图像处理到图像分析的关键步骤。现有的方法包括：基于阈值、区域、边缘的以及基于特定理论的分割方法等，目前基于深度学习的方法发展迅速。从数学角度来看，图像分割是将数字图像划分成互不相交的区域的过程。图像分割的过程也是一个标记过程，即把属于同一区域的像索赋予相同的编号。

- **基于阈值的分割方法**

​		（1）固定阈值分割

​		固定某像素值为分割点

​		（2）直方图双峰法

​		Prewitt 等人于六十年代中期提出的直方图双峰法(也称 mode 法) 是典型的全局单阈值分割方法。该方法的基本思想是：假设图像中有明显的目标和背景，则其灰度直方图呈双峰分布，当灰度级直方图具有双峰特性时，选取两峰之间的谷对应的灰度级作为阈值。如果背景的灰度值在整个图像中可以合理地看作为恒定，而且所有物体与背景都具有几乎相同的对比度，那么，选择一个正确的、固定的全局阈值会有较好的效果.算法实现：找到第一个峰值和第二个峰值,再找到第一和第二个峰值之间的谷值，谷值就是那个阀值了。

​		（3）大津法 OTSU （最大类间方差法）

​		日本学者大津在1979年提出的自适应阈值确定方法。 按照图像的灰度特性，将图像分为背景和目标两部分。背景和目标之间的类间方差越大,说明构成图像的2部分的差别越大,当部分目标错分为背景或部分背景错分为目标都会导致2部分差别变小。因此,使*类间方差最大*的分割意味着错分概率最小。

​		**特点**：

​		阈值分割的优点是计算简单、运算效率较高、速度快。全局阈值对于灰度相差很大的不同目标和背景能进行有效的分割。当图像的灰度差异不明显或不同目标的灰度值范围有重叠时，应采用局部阈值或动态阈值分割法。另一方面，这种方法只考虑像素本身的灰度值，一般不考虑空间特征，因而对噪声很敏感。在实际应用中，阈值法通常与其他方法结合使用。

​		阈值设定易受噪声和光亮度影响。近年来的方法有：用最大相关性原则选择阈值的方法、基于图像拓扑稳定状态的方法、Yager测度极小化方法、灰度共生矩阵方法、方差法、熵法、峰值和谷值分析法等，其中，自适应阈值法、最大熵法、模糊阈值法、类间阈值法是对传统阈值法改进较成功的几种算法。更多的情况下，阈值的选择会综合运用2种或2种以上的方法，这也是图像分割发展的一个趋势。

- **基于边缘的分割方法**

​		所谓边缘是指图像中两个不同区域的边界线上连续的像素点的集合，是图像局部特征不连续性的反映，体现了灰度、颜色、纹理等图像特性的突变。通常情况下，基于边缘的分割方法指的是基于灰度值的边缘检测，它是建立在边缘灰度值会呈现出阶跃型或屋顶型变化这一观测基础上的方法。

​		阶跃型边缘两边像素点的灰度值存在着明显的差异，而屋顶型边缘则位于灰度值上升或下降的转折处。正是基于这一特性，可以使用微分算子进行边缘检测，即使用一阶导数的极值与二阶导数的过零点来确定边缘，具体实现时可以使用图像与模板进行卷积来完成。 

​		常用灰度的一阶或者二阶微分算子进行边缘检测。常用的微分算子有一次微分(sobel算子，Robert算子等)，二次微分(拉普拉斯算子等)。

​		**特点**：

​		基于边缘的分割方法其难点在于边缘检测时抗噪性和检测精度之间的矛盾。若提高检测精度，则噪声产生的伪边缘会导致不合理的轮廓；若提高抗噪性，则会产生轮廓漏检和位置偏差。为此，人们提出各种多尺度边缘检测方法，根据实际问题设计多尺度边缘信息的结合方案，以较好的兼顾抗噪性和检测精度。

- **基于区域的分割方法**

​		（1）种子区域生长法

​		从一组代表不同生长区域的种子像素开始，接下来将种子像素邻域里符合条件的像素合并到种子像素所代表的生长区域中，并将新添加的像素作为新的种子像素继续合并过程，直到找不到符合条件的新像素为止。该方法的关键是选择合适的初始种子像素以及合理的生长准则。

​		（2）分水岭法

​		一种基于拓扑理论的数学形态学的分割方法，其基本思想是把图像看作是测地学上的拓扑地貌，图像中每一点像素的灰度值表示该点的海拔高度，每一个局部极小值及其影响区域称为集水盆，而集水盆的边界则形成分水岭。该算法的实现可以模拟成洪水淹没的过程，图像的最低点首先被淹没，然后水逐渐淹没整个山谷。当水位到达一定高度的时候将会溢出，这时在水溢出的地方修建堤坝，重复这个过程直到整个图像上的点全部被淹没，这时所建立的一系列堤坝就成为分开各个盆地的分水岭。分水岭算法对微弱的边缘有着良好的响应，但图像中的噪声会使分水岭算法产生过分割的现象。为了达到更好的分割效果，常常将分水岭算法应用到梯度图像上，而不是图像本身。

​		**特点**：

​		基于区域的分割方法往往会造成图像的过度分割，而单纯的基于边缘检测方法有时不能提供较好的区域结构，为此可将基于区域的方法和边缘检测的方法结合起来，发挥各自的优势以获得更好的分割效果。



## 三、论述

### 3.1 H.264标准的编解码流程

![H.264编解码流程图](https://github.com/EthanChen916/Digital-Image-Processing-Practice/blob/main/img/H.264编解码流程图.png)

### 3.2 图像检索原理与流程

​		图像检索是输入一张图像，在特定图像库中检索出相关内容图像并输出的过程。图像检索和识别本质上是相同技术原理的不同表现方式，可用于不同场景。核心点是:特征提取+特征匹配。图像检索前往往要建立图像库，可通过爬虫技术建立数据量较大的图像库。图像库建立后需要对其进行特征提取建立特征库，然后目标图像输入并提取其特征与特征库进行匹配，按相似度（如采用几何距离量化）由大到小输出一定阈值下的图像结果，即完成图像检索。特征提取可基于颜色、纹理等特征也可采用深度神经网络进行特征提取，目前后者特征提取效果更优，用于检索时精度更高。像电商平台中的“拍照找到相关物品”等功能就是图像搜索的应用。

### 3.3 网络爬虫抓取图片的基本原理与核心流程

​		简单理解网络爬虫就是自动抓取网页信息的代码，可以简单理解成代替繁琐的复制粘贴操作的手段。

​		（1）请求网站：模拟浏览器来向网站请求数据，使用urllib中的urlopen来打开网站，使用read来获取网站的源码；

​		（2）查找图片：根据网站的HTML语句的规则，设计并编译获取图片链接的正则表达式；使用正则表达式匹配网站的HTML代码，将获得的所有图片的链接储存在一个列表里面，如果没有抓取到图片则列表为空；

​		（3）下载图片：使用urllib中的urlretrieve功能将列表中的图片依次下载到本地。

### 3.4 基于深度学习的人脸识别大致流程

​		人脸识别大致包括：人脸检测——>对齐|校正——>识别

​		基于深度学习的人脸识别，能更深层次的发掘图像特征信息并用于识别，已取得比传统方法更高的精度，已广泛应用于实际场景如：车站、机场等安检、门禁系统、签到系统、支付以及犯罪分子的追踪等。

​		大致实现流程：

​		（1）人脸数据集准备，分为训练集和测试集，选用合适框架（如:pytorch）构建特定网络模型（如facenet），

​		（2）模型训练。训练过程即为图像输入神经网络（需要格式转换、合适图像预处理等），经过网络的卷积、池化、全连接等层最终由输出层输出，根据目标值和实际值得差异计算loss函数，随后采用合适训练方式如梯度下降法进行反向传播以更新网络参数，循环进行前向、反向传播即训练以降低loss，最终训练至loss足够低及达到预期准确率或达到最大迭代次数后结束训练并保存网络模型。

​		（3）模型推理。进行人脸识别。先构建人脸识别库（可采用爬虫技术构建大量库，也可以采用现场录入等方式，据实际情况而定），库中人脸图像通过模型提取特征得到特征库，然后输入的目标人脸也通过网络进行特征提取得到特征并与特征库进行特征匹配（可计算相应量化指标如欧氏距离等），限定相似度阈值，输出最优匹配结果，即确定身份完成人脸识别。

